{% extends "base.html" %}

{% block content %}
<main class="feed">
    <div class="feed-header">
        <h2>Find a Mentor</h2>
        <p style="color:#777; font-size:14px;">Connect with experienced Alumni to guide your career.</p>
    </div>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div style="background:#eefdf5; color:#155724; padding:10px; margin-bottom:15px; border-radius:5px;">
                {{ messages[0] }}
            </div>
        {% endif %}
    {% endwith %}

    <div class="mentor-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
        
        {% for alum in alumni_list %}
        <div class="mentor-card" style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 20px; text-align: center;">
            
            <div class="avatar-large" style="width: 80px; height: 80px; background: #333; color: white; font-size: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; margin: 0 auto 15px;">
                {{ alum.username[0] }}
            </div>
            
            <h3 style="margin: 0; font-size: 18px;">
                <a href="/mentor/{{ alum.id }}" style="text-decoration:none; color:#333;">
                    {{ alum.username }}
                </a>
            </h3>
            <p style="color: #7DA68D; font-weight: bold; font-size: 13px; margin: 5px 0 15px;">{{ alum.role }}</p>
            
            <p style="font-size: 13px; color: #666; margin-bottom: 20px;">
                Expert in Software Engineering, AI, and Career Development.
            </p>

            {% if alum.id in request_status %}
                <div style="display:flex; flex-direction:column; align-items:center; gap:5px;">
                    <span style="color: #666; font-weight: bold; font-size: 13px; background:#eee; padding:5px 10px; border-radius:4px; width:100%; box-sizing:border-box;">
                        <i class="fas fa-clock"></i> Pending
                    </span>
                    
                    <a href="/cancel_request/{{ alum.id }}" 
                       style="color: #dc3545; font-size: 11px; text-decoration: underline; cursor: pointer;">
                       Cancel Request
                    </a>
                </div>
            {% else %}
                <a href="/request_mentor/{{ alum.id }}" style="display: block; background: #7DA68D; color: white; text-decoration: none; padding: 10px; border-radius: 5px; font-weight: bold;">
                    Request Mentorship
                </a>
            {% endif %}

        </div>
        {% else %}
            <p>No alumni found in the system.</p>
        {% endfor %}

    </div>

</main>
{% endblock %}

